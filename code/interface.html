<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<title>Politics Game</title>
		
		<meta name="description" content="" />
		<meta name="author" content="Sander Latour and Frank Smit" />

		<link rel="stylesheet" href="style.css" />

    <script src="inheritance.js"></script>
    <script src="Queue.js"></script>
		<script src="Game.js"></script>
		<script src="GameController.js"></script>
		<script src="GameState.js"></script>
		<script src="EmotionState.js"></script>
		<script src="ActionTree.js"></script>
		<script src="ActionNode.js"></script>
		<script src="Agent.js"></script>
		<script src="HumanAgent.js"></script>
		
		<script>
			function start() {
        		var game = new Game();
        		game.init();
			}

      function requestApproval(gamecontroller, request) {	
        // get the reference for the body
        //var mybody = document.getElementsByTagName("body")[0];
        var divgame = document.getElementById("game-view");
        while(divgame.firstChild){
          divgame.removeChild(divgame.firstChild);
        }
    
        // creates <table> and <tbody> elements
        mytable     = document.createElement("table");
        mytablebody = document.createElement("tbody");
		        
				for(var j = 0; j < request.length; j++) {
					row = document.createElement("tr");
					row.setAttribute("height", "150px");
					
					row.setAttribute("id", "agent"+j);
					
					cell1 = document.createElement("td");
					cell1.setAttribute('width', '100px');
					//text1 =  document.createTextNode(request[j].agent.getName());
					var oImg=document.createElement("img");
					oImg.setAttribute('src', '../images/'+request[j].agent.getImg());
					oImg.setAttribute('alt', request[j].agent.getName());
					cell1.appendChild(oImg);
					
					row.appendChild(cell1);
					
					cell2 = document.createElement("td");
					text2 =  document.createTextNode(request[j].action.getDescription());
					cell2.appendChild(text2);
					
					row.appendChild(cell2);
					
					cell3 = document.createElement("td");
					consequenceText = "";
					
					for(var key in request[j].action.getEffects()) {
						consequenceText += key + " " + request[j].action.getEffects()[key] + ', ';
					}
					text3 = document.createTextNode(consequenceText);
					cell3.appendChild(text3);
					
					row.appendChild(cell3);
					
					cell4 = document.createElement("td");
					
					var buttonnode = document.createElement('input');
					buttonnode.setAttribute('type','button');
					buttonnode.setAttribute('value','Approve request');
					
					buttonnode.onclick = (function(k){ return function(){
						gamecontroller.perform(request[k].action) }
					})(j);
					
					cell4.appendChild(buttonnode);
					
					row.appendChild(cell4);
					
					mytablebody.appendChild(row);
					
				}
		
	  	    // appends <tbody> into <table>
	        mytable.appendChild(mytablebody);
	        // appends <table> into <body>
	        divgame.appendChild(mytable);
	        
	        //mytable.setAttribute('id', 'game-view');
	        // sets the border attribute of mytable to 2;
	        mytable.setAttribute("border","0");
	        mytable.setAttribute('align', 'center');
	        // creating all cells
		  }			
		</script>

	</head>
	<body onload="start()">
		<div id="game-view"></div>
	</body>
</html>
